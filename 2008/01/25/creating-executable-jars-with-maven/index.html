<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Andrew E. Bruno is a software developer and GNU/Linux enthusiast. His interests include web development, high performance computing, and data visualization.">
    <meta name="author" content="Andrew E. Bruno">
    <link rel="shortcut icon" href="/favicon.ico">
    <title>  Creating executable jars with Maven &middot;  qnot.org</title>
	<link href="https://fonts.googleapis.com/css?family=Inconsolata:400,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://qnot.org/css/syntax.css">
    <link rel="stylesheet" href="https://qnot.org/css/styles.css">

    
    
  </head>

<body>

<div class="container">
<ol class="breadcrumb">
    <li><a href="/">About</a></li>
    <li><a href="/publications/">Publications</a></li>
    <li><a href="https://github.com/aebruno">Code</a></li>
    <li><a href="/contact/">Contact</a></li>
</ol>


<div class="post">
  <h1>Creating executable jars with Maven</h1>
  <div class="post-date">Fri, Jan 25, 2008</div>
      <p>After wrestling with <a href="http://maven.apache.org/plugins/maven-assembly-plugin/">Maven
assemblies</a> for while I
finally figured out how to build executable jars. The Maven assembly plugin
allows you to define ways to package up your project for distribution by
creating various assembly descriptor files.</p>
<p>Here's a quick example of a Maven
assembly for building an executable jar (uberjar). For this example we'll
create a brand new project from scratch but it should be easy to see how to
integrate into an existing project.</p>
<p>First step lets create a test project:</p>
<pre><code>$ mvn archetype:create -DgroupId=org.qnot.example -DartifactId=hello-world
$ cd hello-world
</code></pre><p>Next add a few dependencies to the project. In this example we'll add a few
libraries from jakarta commons. The <!-- raw HTML omitted --> section in the pom.xml
should now look like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml">  <span class="nt">&lt;dependencies</span><span class="nt">&gt;</span>
    <span class="nt">&lt;dependency</span><span class="nt">&gt;</span>
      <span class="nt">&lt;groupId</span><span class="nt">&gt;</span>junit<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>junit<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version</span><span class="nt">&gt;</span>3.8.1<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;scope</span><span class="nt">&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency</span><span class="nt">&gt;</span>
      <span class="nt">&lt;groupId</span><span class="nt">&gt;</span>commons-cli<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>commons-cli<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version</span><span class="nt">&gt;</span>1.1<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency</span><span class="nt">&gt;</span>
      <span class="nt">&lt;groupId</span><span class="nt">&gt;</span>commons-lang<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>commons-lang<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version</span><span class="nt">&gt;</span>2.3<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span></code></pre></div>
<p>Create a META-INF/ directory to store the MANIFEST.MF file which defines the
main class in the executable jar.</p>
<pre><code>$ mkdir -p src/main/resources/META-INF/
$ echo 'Main-Class: org.qnot.example.App' &gt; MANIFEST.MF 
</code></pre><p>Create a src/assemble directory to store the assembly descriptor files</p>
<pre><code>$ mkdir src/assemble
</code></pre><p>Next we'll create the actual assembly descriptor file which defines how to
package up the jar. Create the file src/assemble/exe.xml with the following
xml:</p>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;assembly</span><span class="nt">&gt;</span>
  <span class="nt">&lt;id</span><span class="nt">&gt;</span>exe<span class="nt">&lt;/id&gt;</span>
  <span class="nt">&lt;formats</span><span class="nt">&gt;</span>
    <span class="nt">&lt;format</span><span class="nt">&gt;</span>jar<span class="nt">&lt;/format&gt;</span>
  <span class="nt">&lt;/formats&gt;</span>
  <span class="nt">&lt;includeBaseDirectory</span><span class="nt">&gt;</span>false<span class="nt">&lt;/includeBaseDirectory&gt;</span>
  <span class="nt">&lt;dependencySets</span><span class="nt">&gt;</span>
    <span class="nt">&lt;dependencySet</span><span class="nt">&gt;</span>
      <span class="nt">&lt;outputDirectory</span><span class="nt">&gt;</span><span class="nt">&lt;/outputDirectory&gt;</span>
      <span class="nt">&lt;outputFileNameMapping</span><span class="nt">&gt;</span><span class="nt">&lt;/outputFileNameMapping&gt;</span>
      <span class="nt">&lt;unpack</span><span class="nt">&gt;</span>true<span class="nt">&lt;/unpack&gt;</span>
      <span class="nt">&lt;scope</span><span class="nt">&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
      <span class="nt">&lt;includes</span><span class="nt">&gt;</span>
        <span class="nt">&lt;include</span><span class="nt">&gt;</span>commons-lang:commons-lang<span class="nt">&lt;/include&gt;</span>
        <span class="nt">&lt;include</span><span class="nt">&gt;</span>commons-cli:commons-cli<span class="nt">&lt;/include&gt;</span>
      <span class="nt">&lt;/includes&gt;</span>
    <span class="nt">&lt;/dependencySet&gt;</span>
  <span class="nt">&lt;/dependencySets&gt;</span>
  <span class="nt">&lt;fileSets</span><span class="nt">&gt;</span>
    <span class="nt">&lt;fileSet</span><span class="nt">&gt;</span>
      <span class="nt">&lt;directory</span><span class="nt">&gt;</span>target/classes<span class="nt">&lt;/directory&gt;</span>
      <span class="nt">&lt;outputDirectory</span><span class="nt">&gt;</span><span class="nt">&lt;/outputDirectory&gt;</span>
    <span class="nt">&lt;/fileSet&gt;</span>
  <span class="nt">&lt;/fileSets&gt;</span>
<span class="nt">&lt;/assembly&gt;</span></code></pre></div>
<p>Inside the <code>&lt;dependecySets/&gt;</code> is where you can add all the libraries you'd like
to include in the uberjar. These must also be defined in your pom.</p>
<p>Finally, add the maven-assembly-plugin to the pom:
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml">  <span class="nt">&lt;build</span><span class="nt">&gt;</span>
    <span class="nt">&lt;finalName</span><span class="nt">&gt;</span>hello-world<span class="nt">&lt;/finalName&gt;</span>
    <span class="nt">&lt;plugins</span><span class="nt">&gt;</span>
      <span class="nt">&lt;plugin</span><span class="nt">&gt;</span>
        <span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>maven-assembly-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;configuration</span><span class="nt">&gt;</span>
          <span class="nt">&lt;descriptors</span><span class="nt">&gt;</span>
            <span class="nt">&lt;descriptor</span><span class="nt">&gt;</span>src/assemble/exe.xml<span class="nt">&lt;/descriptor&gt;</span>
          <span class="nt">&lt;/descriptors&gt;</span>
          <span class="nt">&lt;archive</span><span class="nt">&gt;</span>
            <span class="nt">&lt;manifestFile</span><span class="nt">&gt;</span>src/main/resources/META-INF/MANIFEST.MF<span class="nt">&lt;/manifestFile&gt;</span>
          <span class="nt">&lt;/archive&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span></code></pre></div></p>
<p>To run the assembly and build the executable jar:</p>
<pre><code>$ mvn assembly:assembly
$ java -jar target/hello-world-exe.jar
Hello World! 
</code></pre><p>I tested the hello-world example using the latest Maven release (2.0.8) and
maven-assembly-plugin-2.2-beta-1. If you run into any issues try and update
your Maven plugins by running:</p>
<pre><code>$ mvn -U compile
</code></pre><p>You can download the example hello-world project
<a href="/data/hello-world.tar.gz">here</a>.</p>
</div>

</div>

    
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>


  </body>
</html>
